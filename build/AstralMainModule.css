/* credits to refact0r btw */
@import url('https://refact0r.github.io/midnight-discord/build/midnight.css');
@import url('https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap');

@font-face {
    font-family: 'asciid';
    font-style: normal;
    font-weight: 400;
    src: local('asciid'), 
         url('https://refact0r.github.io/system24/assets/asciid.woff') format('woff');
}

body {
    --font: 'DM Mono';
    --code-font: 'DM Mono';
    font-weight: 300;
    letter-spacing: -0.05ch;

    --gap: 12px;
    --divider-thickness: 4px;
    --border-thickness: 2px;
    --border-hover-transition: 0.2s ease;

    --animations: on;
    --list-item-transition: 0.2s ease;
    --dms-icon-svg-transition: 0.4s ease;

    --top-bar-height: var(--gap);
    --top-bar-button-position: titlebar;
    --top-bar-title-position: off;
    --subtle-top-bar-title: off;

    --custom-window-controls: off;
    --window-control-size: 14px;

    --custom-dms-icon: off;
    --dms-icon-svg-url: url('');
    --dms-icon-svg-size: 90%;
    --dms-icon-color-before: var(--icon-subtle);
    --dms-icon-color-after: var(--white);
    --custom-dms-background: off;
    --dms-background-image-url: url('');
    --dms-background-image-size: cover;
    --dms-background-color: linear-gradient(70deg, var(--blue-2), var(--purple-2), var(--red-2));

    --background-image: off;
    --background-image-url: url('');

    --transparency-tweaks: off;
    --remove-bg-layer: off;
    --panel-blur: off;
    --blur-amount: 12px;
    --bg-floating: var(--bg-3);

    --small-user-panel: on;
    --unrounding: on;
    --custom-spotify-bar: on;
    --ascii-titles: on;
    --ascii-loader: astral;
    --panel-labels: on;
}

:root {
    --colors: on;

    --text-0: var(--bg-4);
    --text-1: oklch(95% 0 0);
    --text-2: oklch(85% 0 0);
    --text-3: oklch(75% 0 0);
    --text-4: oklch(60% 0 0);
    --text-5: oklch(40% 0 0);

    --bg-1: oklch(31% 0 0);
    --bg-2: oklch(27% 0 0);
    --bg-3: oklch(23% 0 0);
    --bg-4: oklch(19% 0 0);
    --hover: oklch(54% 0 0 / 0.1);
    --active: oklch(54% 0 0 / 0.2);
    --active-2: oklch(54% 0 0 / 0.3);
    --message-hover: var(--hover);

    --accent-1: var(--purple-1);
    --accent-2: var(--purple-2);
    --accent-3: var(--purple-3);
    --accent-4: var(--purple-4);
    --accent-5: var(--purple-5);
    --accent-new: var(--red-2);
    
    --mention: linear-gradient(to right, color-mix(in hsl, var(--accent-2), transparent 90%) 40%, transparent);
    --mention-hover: linear-gradient(to right, color-mix(in hsl, var(--accent-2), transparent 95%) 40%, transparent);
    --reply: linear-gradient(to right, color-mix(in hsl, var(--text-3), transparent 90%) 40%, transparent);
    --reply-hover: linear-gradient(to right, color-mix(in hsl, var(--text-3), transparent 95%) 40%, transparent);

    --online: var(--green-2);
    --dnd: var(--red-2);
    --idle: var(--yellow-2);
    --streaming: var(--purple-2);
    --offline: var(--text-4);

    --border-light: var(--hover);
    --border: var(--active);
    --border-hover: var(--accent-2);
    --button-border: hsl(220, 0%, 100%, 0.1);

    --red-1: oklch(75% 0.13 0);
    --red-2: oklch(70% 0.13 0);
    --red-3: oklch(65% 0.13 0);
    --red-4: oklch(60% 0.13 0);
    --red-5: oklch(55% 0.13 0);

    --green-1: oklch(75% 0.12 170);
    --green-2: oklch(70% 0.12 170);
    --green-3: oklch(65% 0.12 170);
    --green-4: oklch(60% 0.12 170);
    --green-5: oklch(55% 0.12 160);

    --blue-1: oklch(75% 0.11 215);
    --blue-2: oklch(70% 0.11 215);
    --blue-3: oklch(65% 0.11 215);
    --blue-4: oklch(60% 0.11 215);
    --blue-5: oklch(55% 0.11 215);

    --yellow-1: oklch(80% 0.12 90);
    --yellow-2: oklch(75% 0.12 90);
    --yellow-3: oklch(70% 0.12 90);
    --yellow-4: oklch(65% 0.12 90);
    --yellow-5: oklch(60% 0.12 90);

    --purple-1: oklch(75% 0.12 310);
    --purple-2: oklch(70% 0.12 310);
    --purple-3: oklch(65% 0.12 310);
    --purple-4: oklch(60% 0.12 310);
    --purple-5: oklch(55% 0.12 310);
}

body {
    --custom-chatbar: separated !important;
    --chatbar-height: 56px !important;
}

.visual-refresh {
    ._960e4207cea8323e-bg {
        background: var(--background-base-low);
    }
    ._01ae244280823725-container {
        background-color: var(--background-base-low);
    }
    ._37e49614b9f110a9-container {
        padding: 8px;
    }
}

@property --ascii-titles {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--ascii-titles: on) {
    h3[data-text-variant='heading-xxl/extrabold'] {
        font-family: 'asciid';
        font-size: 50px;
        font-weight: 400;
    }
}

@property --ascii-loader {
    syntax: 'off | system24 | cats | astral | astralA | astralCosmic';
    inherits: false;
    initial-value: system24;
}

@container body style(--ascii-loader: system24) {
    .a2f5142ba8328dfd-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }
    
    .a2f5142ba8328dfd-content > .a2f5142ba8328dfd-spinner {
        display: none;
    }
    
    .a2f5142ba8328dfd-content::before {
        content: '                    __                ___  __ __\A    _______  _______/ /____  ____ ___ |__ \\/ // /\A   / ___/ / / / ___/ __/ _ \\/ __ `__ \\__/ / // /_\A  (__  ) /_/ (__  ) /_/  __/ / / / / / __/__  __/\A/____/\\__, /____/\\__/\\___/_/ /_/ /_/____/ /_/   \A      /____/                                     ';
        display: block;
        font-size: 18px;
        font-family: monospace;
        white-space: pre;
        line-height: 1.2;
        background: linear-gradient(to right, 
            var(--brand-360) 0%, 
            var(--background-accent) 25%, 
            var(--background-accent) 75%, 
            var(--brand-360) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 200% auto;
        animation: textShine 1.5s linear infinite reverse;
    }
    
    .a2f5142ba8328dfd-text {
        position: static;
    }
    
    @keyframes textShine {
        0%, 100% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        50.0001% {
            background-position: -100% 50%;
        }
    }
}

@container body style(--ascii-loader: astralA) {
    .a2f5142ba8328dfd-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 24px;
    }
    
    .a2f5142ba8328dfd-content > .a2f5142ba8328dfd-spinner {
        display: none;
    }
    
    .a2f5142ba8328dfd-content::before {
        content: 'A S T R A L   L A U N C H E R';
        display: block;
        font-size: 20px;
        font-family: 'DM Mono', monospace;
        font-weight: 400;
        letter-spacing: 3px;
        text-transform: uppercase;
        color: transparent;
        background: 
            linear-gradient(90deg, 
                transparent 0%, 
                var(--accent-2) 50%, 
                transparent 100%),
            linear-gradient(90deg, 
                var(--purple-2) 0%, 
                var(--blue-2) 50%, 
                var(--purple-2) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 200% 100%, 300% 100%;
        animation: 
            shine 2s ease-in-out infinite,
            gradientFlow 4s linear infinite;
    }
    
    .a2f5142ba8328dfd-text {
        position: static;
    }
    
    @keyframes shine {
        0%, 100% { background-position: -100% 0, 0 0; }
        50% { background-position: 200% 0, 0 0; }
    }
    
    @keyframes gradientFlow {
        0% { background-position: 0 0, 0 0; }
        100% { background-position: 0 0, 300% 0; }
    }
}

@container body style(--ascii-loader: astral) {
    .a2f5142ba8328dfd-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }
    
    .a2f5142ba8328dfd-content > .a2f5142ba8328dfd-spinner {
        display: none;
    }
    
    .a2f5142ba8328dfd-content::before {
        content: ' ______     ______     ______   ______     ______     __            __         ______     __  __     __   __     ______     __  __     ______     ______    \A/\  __ \   /\  ___\   /\__  _\ /\  == \   /\  __ \   /\ \          /\ \       /\  __ \   /\ \/\ \   /\ "-.\ \   /\  ___\   /\ \_\ \   /\  ___\   /\  == \   \A\ \  __ \  \ \___  \  \/_/\ \/ \ \  __<   \ \  __ \  \ \ \____     \ \ \____  \ \  __ \  \ \ \_\ \  \ \ \-.  \  \ \ \____  \ \  __ \  \ \  __\   \ \  __<   \A \ \_\ \_\  \/\_____\    \ \_\  \ \_\ \_\  \ \_\ \_\  \ \_____\     \ \_____\  \ \_\ \_\  \ \_____\  \ \_\\"\_\  \ \_____\  \ \_\ \_\  \ \_____\  \ \_\ \_\ \A  \/_/\/_/   \/_____/     \/_/   \/_/ /_/   \/_/\/_/   \/_____/      \/_____/   \/_/\/_/   \/_____/   \/_/ \/_/   \/_____/   \/_/\/_/   \/_____/   \/_/ /_/ ';
        display: block;
        font-size: 10px;
        font-family: 'Courier New', monospace;
        font-weight: bold;
        white-space: pre;
        line-height: 1.1;
        letter-spacing: 0.5px;
        background: linear-gradient(45deg, 
            #667eea 0%, 
            #764ba2 25%, 
            #f093fb 50%, 
            #764ba2 75%, 
            #667eea 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 300% 300%;
        animation: astralGlow 4s linear infinite;
        text-shadow: 0 0 10px rgba(118, 75, 162, 0.3);
    }
    
    .a2f5142ba8328dfd-text {
        position: static;
        margin-top: 10px;
        font-size: 14px;
        opacity: 0.8;
        color: var(--text-3);
        font-family: 'DM Mono', monospace;
        letter-spacing: 1px;
    }
    
    @keyframes astralGlow {
        0% {
            background-position: 0% 50%;
            text-shadow: 0 0 10px rgba(118, 75, 162, 0.3);
        }
        25% {
            background-position: 50% 50%;
            text-shadow: 0 0 15px rgba(118, 75, 162, 0.5);
        }
        50% {
            background-position: 100% 50%;
            text-shadow: 0 0 20px rgba(118, 75, 162, 0.7);
        }
        75% {
            background-position: 50% 50%;
            text-shadow: 0 0 15px rgba(118, 75, 162, 0.5);
        }
        100% {
            background-position: 0% 50%;
            text-shadow: 0 0 10px rgba(118, 75, 162, 0.3);
        }
    }
}

@container body style(--ascii-loader: astralCosmic) {
    .a2f5142ba8328dfd-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        position: relative;
    }
    
    .a2f5142ba8328dfd-content > .a2f5142ba8328dfd-spinner {
        display: none;
    }
    
    .a2f5142ba8328dfd-content::before {
        content: '┌── PROJECT ────────────────────────────────────────────────────┐\A║                    A S T R A L   L A U N C H E R                   ║\A└───────────────────────────────────────────────────────────────┘';
        display: block;
        font-size: 10px;
        font-family: 'Cascadia Mono', monospace;
        font-weight: bold;
        white-space: pre;
        line-height: 4;
        letter-spacing: 0.5px;
        color: transparent;
        background: 
            linear-gradient(45deg, 
                #667eea 0%, 
                #764ba2 20%, 
                #9d4edd 40%, 
                #c77dff 60%, 
                #764ba2 80%, 
                #667eea 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 400% 400%;
        animation: 
            astralFlow 6s ease-in-out infinite,
            astralPulse 3s ease-in-out infinite;
        position: relative;
        z-index: 2;
    }
    
    /* Добавляем звездный фон */
    .a2f5142ba8328dfd-content::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
            radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.3) 1px, transparent 2px),
            radial-gradient(1px 1px at 40% 70%, rgba(255,255,255,0.2) 1px, transparent 2px),
            radial-gradient(2px 2px at 60% 20%, rgba(255,255,255,0.4) 1px, transparent 2px),
            radial-gradient(1px 1px at 80% 50%, rgba(255,255,255,0.2) 1px, transparent 2px),
            radial-gradient(2px 2px at 30% 80%, rgba(255,255,255,0.3) 1px, transparent 2px);
        background-size: 200px 200px;
        animation: starsTwinkle 4s ease-in-out infinite;
        z-index: 1;
    }
    
    .a2f5142ba8328dfd-text {
        position: static;
        margin-top: 15px;
        font-size: 13px;
        opacity: 0.7;
        color: var(--text-3);
        font-family: 'DM Mono', monospace;
        letter-spacing: 2px;
        text-transform: uppercase;
        z-index: 2;
        background: linear-gradient(90deg, 
            transparent 0%, 
            var(--accent-2) 50%, 
            transparent 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 200% 100%;
        animation: subtitleShine 3s ease-in-out infinite;
    }
    
    @keyframes astralFlow {
        0%, 100% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
    }
    
    @keyframes astralPulse {
        0%, 100% {
            opacity: 1;
            filter: drop-shadow(0 0 5px rgba(118, 75, 162, 0.3));
        }
        50% {
            opacity: 0.9;
            filter: drop-shadow(0 0 15px rgba(118, 75, 162, 0.6));
        }
    }
    
    @keyframes starsTwinkle {
        0%, 100% {
            opacity: 0.3;
        }
        50% {
            opacity: 0.7;
        }
    }
    
    @keyframes subtitleShine {
        0%, 100% {
            background-position: -100% 0;
        }
        50% {
            background-position: 200% 0;
        }
    }
}

@container body style(--ascii-loader: cats) {
    .a2f5142ba8328dfd-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 32px;
        position: static;
    }
    
    .a2f5142ba8328dfd-content > .a2f5142ba8328dfd-spinner {
        display: none;
    }
    
    .a2f5142ba8328dfd-content::before {
        content: url('https://raw.githubusercontent.com/refact0r/system24/refs/heads/main/assets/cats.gif');
        display: block;
    }
    
    .a2f5142ba8328dfd-text {
        position: static;
    }
}

@container root style(--colors: on) {
    #app-mount ._44b0c28be7879b7b-wrapper,
    #app-mount ._1ce5d425feffd32a-container {
        --online-2: var(--online);
        --dnd-2: var(--dnd);
        --idle-2: var(--idle);
        --offline-2: var(--offline);
        --streaming-2: var(--streaming);
    }
}

body {
    --label-color: var(--text-muted);
    --label-hover-color: var(--brand-360);
    --label-font-weight: 500;
}

@property --panel-labels {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--panel-labels: on) {
    .visual-refresh {
        ._5e434347c823b592-guilds,
        ._5e434347c823b592-panels,
        ._5e434347c823b592-sidebarList,
        .f75fb00fb7356cbe-subtitleContainer,
        ._36d072eab2b2e737-messagesWrapper,
        .f75fb00fb7356cbe-channelTextArea,
        .f75fb00fb7356cbe-content > .c8ffbb79449f399c-membersWrap,
        .c8ffbb79449f399c-container,
        ._133bf5eea8e33a34-container > ._9293f6b2fc12398a-container,
        ._133bf5eea8e33a34-peopleColumn,
        ._133bf5eea8e33a34-nowPlayingColumn,
        ._01ae244280823725-container > ._9293f6b2fc12398a-container,
        .cb9592ad77576717-callContainer {
            &::after {
                content: '';
                display: block;
                color: var(--label-color);
                font-weight: var(--label-font-weight);
                position: absolute;
                top: -10px;
                left: 8px;
                background-color: var(--background-base-low);
                padding: 0 4px;
                z-index: 100;
                font-size: 16px;
                transition: color var(--border-hover-transition);
            }

            &:hover::after {
                color: var(--label-hover-color);
            }
        }

        ._5e434347c823b592-guilds::after { content: 'nav'; }
        ._5e434347c823b592-panels::after { content: 'user'; }
        ._5e434347c823b592-sidebarList::after { content: 'channels'; }
        .f75fb00fb7356cbe-subtitleContainer::after { content: 'channel'; }
        ._36d072eab2b2e737-messagesWrapper::after { content: 'chat'; }
        .f75fb00fb7356cbe-channelTextArea::after { content: 'input'; }
        .c8ffbb79449f399c-container::after,
        .f75fb00fb7356cbe-content > .c8ffbb79449f399c-membersWrap::after { content: 'members'; }
        ._133bf5eea8e33a34-container > ._9293f6b2fc12398a-container::after { content: 'friends'; }
        ._133bf5eea8e33a34-peopleColumn::after { content: 'list'; }
        ._133bf5eea8e33a34-nowPlayingColumn::after { content: 'activity'; }
        ._01ae244280823725-container > ._9293f6b2fc12398a-container::after { content: 'thread'; }
        .cb9592ad77576717-callContainer::after { content: 'vc'; }

        .f75fb00fb7356cbe-content > .c8ffbb79449f399c-membersWrap,
        ._5e434347c823b592-panels,
        ._5e434347c823b592-sidebar,
        ._5e434347c823b592-sidebarList,
        .f75fb00fb7356cbe-chat,
        ._5e434347c823b592-page,
        .f75fb00fb7356cbe-channelTextArea,
        ._133bf5eea8e33a34-container,
        .c8ffbb79449f399c-container,
        ._5e434347c823b592-guilds,
        ._133bf5eea8e33a34-peopleColumn,
        ._133bf5eea8e33a34-tabBody,
        ._01ae244280823725-container,
        .f75fb00fb7356cbe-chatContent,
        ._36d072eab2b2e737-messagesWrapper {
            overflow: visible !important;
        }

        ._5e434347c823b592-page,
        ._133bf5eea8e33a34-tabBody { min-height: 0; }
        ._133bf5eea8e33a34-peopleColumn { min-width: 0; }

        ._5e434347c823b592-sidebarList,
        .c8ffbb79449f399c-container,
        ._133bf5eea8e33a34-peopleColumn,
        ._133bf5eea8e33a34-nowPlayingColumn,
        ._36d072eab2b2e737-messagesWrapper,
        .f75fb00fb7356cbe-channelTextArea {
            position: relative;
        }

        ._36d072eab2b2e737-scroller { top: 8px; }
        .c8ffbb79449f399c-membersWrap { height: calc(100% - 8px); }
        .ef3116c2da186559-scroller { padding-top: calc(var(--custom-guild-list-padding) - 8px); }

        .f37cb1984c371ee5-animatedContainer,
        .f37cb1984c371ee5-headerGlass {
            left: 8px;
            right: 8px;
            width: auto;
        }
        .f37cb1984c371ee5-header { margin: 0 8px; }
        ._2637a2609f343032-container { overflow: hidden; }
        .f37cb1984c371ee5-headerEllipseForeground { display: none; }

        .cb9592ad77576717-callContainer { padding: 8px; }

        ._36d072eab2b2e737-messagesWrapper { mask: none !important; }
    }
}

@property --custom-spotify-bar {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--custom-spotify-bar: on) {
    .visual-refresh {
        #vc-spotify-progress-bar {
            margin: 8px 0 0 0;
        }
        
        .vc-spotify-button-row {
            margin-top: 8px;
        }
        
        #app-mount #vc-spotify-progress-bar .a562c840daab72a7-bar {
            height: 22px !important;
            top: 0 !important;
            background-color: var(--background-surface-high);
        }
        
        #app-mount #vc-spotify-progress-bar .a562c840daab72a7-barFill {
            height: 22px !important;
        }
        
        #vc-spotify-progress-bar .vc-spotify-time-left,
        #vc-spotify-progress-bar .vc-spotify-time-right {
            z-index: 1;
            top: 0;
            margin-top: 0;
            mix-blend-mode: difference;
            font-size: 16px;
            line-height: 22px;
            pointer-events: none;
        }
        
        #vc-spotify-progress-bar .vc-spotify-time-left {
            left: 6px;
        }
        
        #vc-spotify-progress-bar .vc-spotify-time-right {
            right: 6px;
        }
        
        #vc-spotify-progress-bar .a562c840daab72a7-grabber {
            visibility: hidden;
        }
    }
}

@property --unrounding {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--unrounding: on) {
    *,
    *::before,
    *::after {
        border-radius: 0 !important;
    }

    .cc5dd25190031396-svg > mask,
    ._44b0c28be7879b7b-svg > rect,
    ._44b0c28be7879b7b-svg > circle,
    ._44b0c28be7879b7b-svg > g,
    ._44b0c28be7879b7b-svg rect[mask^='url(#'],
    ._20a53846fe2e8513-avatar .a423bdd721ddcc83-status {
        display: none;
    }

    ._68edb95846a37624-mask > foreignObject,
    ._44b0c28be7879b7b-svg > foreignObject,
    ._2338f50c3988e5ec-svg > foreignObject {
        mask: none;
    }

    ._44b0c28be7879b7b-wrapper,
    ._1ce5d425feffd32a-container {
        --online-2: #43a25a;
        --dnd-2: #d83a41;
        --idle-2: #ca9654;
        --offline-2: #82838b;
        --streaming-2: #9147ff;
    }
    
    ._44b0c28be7879b7b-wrapper:has(rect)::after,
    ._1ce5d425feffd32a-container:has(.a423bdd721ddcc83-status)::after {
        content: '';
        display: block;
        position: absolute;
        height: 8px;
        width: 8px;
        bottom: -4px;
        right: -4px;
        border: 2px solid var(--background-base-lower);
    }
    
    ._44b0c28be7879b7b-wrapper:has(rect[fill='#43a25a'])::after,
    ._1ce5d425feffd32a-container:has(.a423bdd721ddcc83-status[style*='rgb(67, 162, 90)'])::after {
        background: var(--online-2) !important;
    }
    ._44b0c28be7879b7b-wrapper:has(rect[fill='#d83a42'])::after {
        background: var(--dnd-2) !important;
    }
    ._44b0c28be7879b7b-wrapper:has(rect[fill='#ca9654'])::after {
        background: var(--idle-2) !important;
    }
    ._44b0c28be7879b7b-wrapper:has(rect[fill='#82838b'])::after {
        background: var(--offline-2) !important;
    }
    ._44b0c28be7879b7b-wrapper:has(rect[fill='#9147ff'])::after {
        background: var(--streaming-2);
    }

    .cc5dd25190031396-lowerBadge {
        border: 2px solid var(--background-base-lower);
        bottom: -4px;
        right: -4px;
    }
    .cc5dd25190031396-upperBadge {
        border: 2px solid var(--background-base-lower);
        top: -4px;
        right: -4px;
    }

    ._48112cbe77dc5022-folderGroup._48112cbe77dc5022-isExpanded > .dbd2630aec71879b-stack {
        overflow: visible !important;
    }

    ._3f21e80f8677ec40-slider > rect[rx='10'] {
        rx: 0 !important;
    }

    ::-webkit-scrollbar-thumb {
        border-radius: 0 !important;
    }
}